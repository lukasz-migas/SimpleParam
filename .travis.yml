dist: xenial
language: python
cache:
  pip: true
before_script:
  - pip install --upgrade tox setuptools virtualenv pytest

matrix:
  include:
    - python: 2.7
      env: TOXENV=py27-pytest
    - python: 3.4
      env: TOXENV=py34-pytest
    - python: 3.5
      env: TOXENV=py35-pytest
    - python: 3.6
      env: TOXENV=py36-pytest
    - python: 3.7
      env: TOXENV=py37-pytest
    - python: pypy
      env: TOXENV=pypy-pytest
    - python: 3.7
      env: TOXENV=py37-flake8
    - python: 3.7
      env: TOXENV=py37-pylint
    - python: 3.7
      env: TOXENV=py37-pre
    - env: TEST=coverage
      os: linux
      python: 3.6

install:
  - pip install --upgrade pip || pip3 install --upgrade pip
  - pip install git+https://github.com/lukasz-migas/SimpleParam.git
  - if [ "${TEST}" == "coverage" ]; then
    pip install codecov pytest==3.6 pytest-cov pytest-sugar pytest-travis-fold;
    fi;

script:
  - SRC_DIR=$(pwd)
  - echo $SRC_DIR
  - ls || dir
  - if [[ "${TEST}" == "coverage" ]]; then
    py.test --cov;
    else tox;
    fi;

notifications:
  email: false

after_success:
  - if [ "${TEST}" == "coverage" ]; then
    codecov --token=38b70ce4-9b10-4aee-b422-fe9e92cc2978;
    fi
